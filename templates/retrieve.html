{% extends "base.html" %}

{% block nav %}
	<div class=nav>
		<ul>
			<li><a href="{{ url_for("index") }}">Home</a></li>
			<li><a href="{{ url_for("about") }}">About</a></li>
			<li><a href="{{ url_for("cite") }}">Cite</a></li>
		</ul>
	</div>
{% endblock %}

{% block body %}
{% if not_found %}
<div class=alert>
	<h3>Warning: the following IDs were not found in the database:</h3>
	<ul>
	{% for nf in not_found %}
		<li>{{ nf }}</li>
	{% endfor %}
	</ul>
</div>
{% endif %}
<div class=main>
<h3>Sort items by:</h3>
<ul id='sort-by'>
	<li><a href='#genename'>Gene name</a></li>
	<li><a href='#systematicname'>Systematic name</a></li>
</ul>
<div class=half>
	<h2>Enriched properties</h2>
	{% if not enriched %}
		No statistically significant enrichment found
	{% else %}
	<table>
	<tr class=table_head>
		<td><h3>Property</h3></td>
		<td><h3>adjusted<br />p-value</h3></td>
		<td><h3>Difference (quantitative) or<br />Odd ratio (non-quantitative)</h3></td>
	</tr>
	{% for k,v in enriched|dictsort(false, 'value') %}
	<tr>
		<td class='sort-by'><a href='#{{k}}'>{{ name_dict[k] }}</a></td>
		<td>{{ v[0] }}</td>
		{% if v[2] == 'x' %}
			<td>{{ v[1]|round(2) }}{{ v[2] }}</td>
		{% else %}
			<td>{{ v[2] }}{{ v[1]|round(2) }}</td>
		{% endif %}
	</tr>
	{% endfor %}
	</table>
	{% endif %}
	<h2>Deenriched properties</h2>
	{% if not deenriched %}
		No statistically significant deenrichment found
	{% else %}
	<table>
	<tr class=table_head>
		<td><h3>Property</h3></td>
		<td><h3>adjusted p-value</h3></td>
		<td><h3>Difference (quantitative) or<br />Odd ratio (non-quantitative)</h3></td>
	</tr>
	{% for k,v in deenriched|dictsort(false, 'value') %}
	<tr>
		<td class='sort-by'><a href='#{{k}}'>{{ name_dict[k] }}</a></td>
		<td>{{ v[0] }}</td>
		{% if v[2] == 'x' %}
			<td>{{ v[1]|round(2) }}{{ v[2] }}</td>
		{% else %}
			<td>{{ v[2] }}{{ v[1]|round(2) }}</td>
		{% endif %}
	</tr>
	{% endfor %}
	</table>
	{% endif %}
</dl>
	
</div>
<div class=half>
	<div class=sortable>
	{% for r in result %}
		<div class=protein>
			<h1 class=genename>{{ r.genename }}</h1>
			<h2 class=systematicname><a href="{{ url_for('single', id=r.systematicname) }}">{{ r.systematicname }}</a></h2>
		</div>
	{% endfor %}
	</div>
</div>
</div>
{% endblock %}
